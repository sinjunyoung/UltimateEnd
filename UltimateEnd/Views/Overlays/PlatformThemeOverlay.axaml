<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:UltimateEnd.ViewModels"
             x:Class="UltimateEnd.Views.Overlays.PlatformThemeOverlay"
             x:DataType="vm:PlatformListViewModel"
             x:Name="PlatformThemeOverlayRoot"
             Focusable="True">

	<!-- 테마 선택 오버레이 -->
	<Border Name="MainBorder"
	        Background="{DynamicResource Background.Card}"
	        CornerRadius="12,0,0,12"
	        Padding="0"
	        HorizontalAlignment="Right"
	        VerticalAlignment="Stretch"
	        Width="{StaticResource Size.OverlayWidth}"
	        ZIndex="3000">

		<Grid RowDefinitions="Auto,*">
			<!-- 헤더 -->
			<Border Grid.Row="0"
			        Background="{DynamicResource Background.Secondary}"
			        Padding="20"
			        BorderThickness="0,0,0,1"
			        BorderBrush="{DynamicResource Background.Border}">
				<Grid ColumnDefinitions="Auto,*">
					<Border Grid.Column="0"
					        ClipToBounds="False"
					        PointerPressed="OnBackClick"
					        Cursor="Hand"
					        Margin="0,0,15,0">
						<PathIcon Classes="AnimatedIcon"
						          Data="{StaticResource Icon.Back}"
						          Width="{StaticResource IconSize.MenuIcon}"
						          Height="{StaticResource IconSize.MenuIcon}"
						          VerticalAlignment="Center"/>
					</Border>
					<TextBlock Grid.Column="1"
					           Text="테마 선택"
					           FontSize="20"
					           FontWeight="Bold"
					           Foreground="{DynamicResource Text.Primary}"
							   Margin="15,0,0,0"
					           VerticalAlignment="Center"/>
				</Grid>
			</Border>

			<!-- 테마 목록 -->
			<ScrollViewer Grid.Row="1"
			              Padding="20">
				<ItemsControl ItemsSource="{Binding AvailableThemes}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border Background="{DynamicResource Background.Secondary}"
							        CornerRadius="8"
							        Padding="15"
							        Margin="0,0,0,10"
							        Cursor="Hand"
							        Tapped="OnThemeItemTapped">
								<Grid ColumnDefinitions="Auto,*,Auto">
									<!-- 테마 미리보기 -->
									<StackPanel Grid.Column="0"
									            Orientation="Horizontal"
									            Spacing="6"
									            VerticalAlignment="Center"
									            Margin="0,0,15,0">
										<Border Background="{Binding PreviewColor1}"
										        Width="24" Height="24"
										        CornerRadius="4"/>
										<Border Background="{Binding PreviewColor2}"
										        Width="24" Height="24"
										        CornerRadius="4"/>
										<Border Background="{Binding PreviewColor3}"
										        Width="24" Height="24"
										        CornerRadius="4"/>
									</StackPanel>

									<!-- 테마 정보 -->
									<StackPanel Grid.Column="1"
									            Spacing="3"
									            VerticalAlignment="Center">
										<TextBlock Text="{Binding Name}"
										           FontSize="15"
										           FontWeight="SemiBold"
										           Foreground="{DynamicResource Text.Primary}"/>
										<TextBlock Text="{Binding Description}"
										           FontSize="12"
										           Foreground="{DynamicResource Text.Muted}"/>
									</StackPanel>

									<!-- 체크 표시 -->
									<PathIcon Grid.Column="2"
									          Data="M 2 8 L 8 14 L 18 2"
									          Width="20" Height="20"
									          Foreground="{DynamicResource Accent.Blue}"
									          VerticalAlignment="Center"
									          IsVisible="{Binding IsSelected}"/>
								</Grid>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ScrollViewer>
		</Grid>
	</Border>
</UserControl>